function Geo(e) {
    this.options = $.extend({}, {
        testing: !0,
        token: "",
        domain: "https://geo.idbcore.com",
        testingdomain: "https://staging-geo.idbcore.com"
    }, e)
}
Geo.prototype.getURL = function(e) {
    return this.options.testing ? this.options.testingdomain + e : this.options.domain + e
}
,
Geo.prototype.getCountries = function(e) {
    var t = this.getURL("/countries/" + e.toString())
      , r = $.Deferred();
    return $.ajax(t, {
        dataType: "json",
        method: "GET",
        error: function(e, t, o) {
            e.responseText ? r.reject(JSON.parse(e.responseText).error) : r.reject(o)
        },
        success: function(e, t, o) {
            r.resolve(e)
        }
    }),
    r.promise()
}
,
Geo.prototype.getCountry = function(e) {
    var t = this.getURL("/country/" + e)
      , r = $.Deferred();
    return $.ajax(t, {
        dataType: "json",
        method: "GET",
        error: function(e, t, o) {
            e.responseText ? r.reject(JSON.parse(e.responseText).error) : r.reject(o)
        },
        success: function(e, t, o) {
            r.resolve(e)
        }
    }),
    r.promise()
}
,
Geo.prototype.getRegions = function(e) {
    var t = this.getURL("/country/" + e + "/regions")
      , r = $.Deferred();
    return $.ajax(t, {
        dataType: "json",
        method: "GET",
        error: function(e, t, o) {
            e.responseText ? r.reject(JSON.parse(e.responseText).error) : r.reject(o)
        },
        success: function(e, t, o) {
            r.resolve(e)
        }
    }),
    r.promise()
}
,
Geo.prototype.getDecile = function(e) {
    var t = this.getURL("/registration_score?zip_code=" + e)
      , r = $.Deferred();
    return $.ajax(t, {
        dataType: "json",
        method: "GET",
        headers: {
            Authorization: "Token token=ce80aab1c5fdab62fd4afd2a66632f2bc7dcde31"
        },
        error: function(e, t, o) {
            e.responseText ? r.reject(JSON.parse(e.responseText).error) : r.reject(o)
        },
        success: function(e, t, o) {
            r.resolve(e)
        }
    }),
    r.promise()
}
,
Geo.prototype.verifyAddress = function(e) {
    if ("" == e.address_line1)
        throw "street must have value";
    var t = this.getURL("/address/verify?street=" + e.address_line1);
    "" != e.city && (t += "&city=" + e.city),
    "" != e.region && (t += "&state=" + e.region),
    "" != e.country && (t += "&country=" + e.country),
    "" != e.postal_code && (t += "&zipcode=" + e.postal_code);
    var r = $.Deferred();
    return $.ajax(t, {
        method: "GET",
        headers: {
            Authorization: "Token token=ce80aab1c5fdab62fd4afd2a66632f2bc7dcde31"
        },
        error: function(e, t, o) {
            e.responseText ? r.reject(JSON.parse(e.responseText).error) : r.reject(o)
        },
        success: function(e, t, o) {
            r.resolve(e)
        }
    }),
    r.promise()
}
;
